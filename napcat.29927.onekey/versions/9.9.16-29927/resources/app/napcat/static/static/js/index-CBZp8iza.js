var De=Object.defineProperty;var Ge=(k,o,s)=>o in k?De(k,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):k[o]=s;var fe=(k,o,s)=>Ge(k,typeof o!="symbol"?o+"":o,s);import{d as z,r as w,o as oe,j as Ce,H as M,I as g,a as e,J as t,K as B,F as te,L as r,M as C,E as V,k as He,w as ne,N as F,O as P,P as ve,Q as U,n as Je,R as ae,S as se,U as Ie,u as Fe,v as Ne,f as Ke,e as Xe}from"./@vue-B4VXNp3b.js";import{s as Ye,m as Ze,c as et,i as tt,a as ot,t as nt,g as at,b as st,u as lt,d as rt,f as it,e as ut,h as ct,j as dt,k as pt,l as mt,n as ft,o as gt,w as vt,p as _t,q as ht,_ as bt,r as Ee,v as Oe,x as yt,y as wt,z as kt,A as Ct}from"./tdesign-icons-vue-next-DQwIrldO.js";import{u as Be,c as Lt,a as St}from"./vue-router-DUXcIdfr.js";import{m as Vt}from"./mitt-DJ65BbbF.js";import{e as Qt}from"./event-source-polyfill-781gAWxU.js";import{M as W,B as Tt,I as Ut,F as Mt,a as Pt,S as xt,O as $t,b as It,c as Ft,d as Nt,e as Et,C as Ot,R as Rt,f as At,D as Bt,L as Wt,g as jt,A as qt,T as zt,h as Dt,i as Gt,j as Ht,k as Jt,l as Kt,m as Xt,n as Yt,o as Zt,p as eo,P as to,q as oo,r as no,s as ao,t as so,u as lo,v as ro,w as io,x as uo,y as co,z as po,E as mo,G as fo,H as go,J as vo,K as _o,N as ho}from"./tdesign-vue-next-C8Ia0tmd.js";import{b as bo}from"./qrcode-DV9Do4_M.js";import"./@popperjs-BQBsAJpH.js";import"./dijkstrajs-C00ieaqj.js";function ia(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const p of a)if(p.type==="childList")for(const d of p.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const p={};return a.integrity&&(p.integrity=a.integrity),a.referrerPolicy&&(p.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?p.credentials="include":a.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function n(a){if(a.ep)return;a.ep=!0;const p=s(a);fetch(a.href,p)}})();const yo={id:"app","theme-mode":"dark"},wo={key:0},ko=z({__name:"App",setup(k){const o=window.matchMedia("(max-width: 768px)"),s={浅色:"light",深色:"dark",自动:"auto"},n=w(!0),p=(()=>{let l=null;return Q=>{const S=document.documentElement;if(Q==="dark")S.setAttribute("theme-mode","dark");else if(Q==="light")S.removeAttribute("theme-mode");else if(Q==="auto"){l=window.matchMedia("(prefers-color-scheme: dark)");const i=$=>{$.matches?S.setAttribute("theme-mode","dark"):S.removeAttribute("theme-mode")};l.addEventListener("change",i);const b=new Event("change");Object.defineProperty(b,"matches",{value:l.matches,writable:!1}),l.dispatchEvent(b),He(()=>{l&&l.removeEventListener("change",i)})}}})(),d=()=>localStorage.getItem("theme"),m=()=>{const l=d();p(l===null?"auto":l)},u=l=>{const Q=s[l.item.label];console.log(Q),p(Q),localStorage.setItem("theme",Q)},c=()=>{n.value=!o.matches,o.matches&&localStorage.setItem("theme","auto")};return oe(()=>{m(),c(),window.addEventListener("resize",c)}),Ce(()=>{window.removeEventListener("resize",c)}),(l,Q)=>{const S=r("router-view"),i=r("t-sticky-item"),b=r("t-sticky-tool");return C(),M(te,null,[g("div",yo,[e(S)]),n.value?(C(),M("div",wo,[e(b,{shape:"round",placement:"right-bottom",offset:[-50,10],onClick:u},{default:t(()=>[e(i,{label:"浅色",popup:"切换浅色模式"},{icon:t(()=>[e(V(Ye))]),_:1}),e(i,{label:"深色",popup:"切换深色模式"},{icon:t(()=>[e(V(Ze))]),_:1}),e(i,{label:"自动",popup:"跟随系统"},{icon:t(()=>[e(V(et))]),_:1})]),_:1})])):B("",!0)],64)}}}),Co=""+new URL("../png/logo_webui-CBEsc38e.png",import.meta.url).href,ge=Vt(),Lo={class:"logo"},So=["width"],Vo={class:"logo-textBox"},Qo={class:"logo-text"},To=z({__name:"Nav",props:{menuItems:{},menuWidth:{}},setup(k){const o=window.matchMedia("(max-width: 800px)"),s=w(localStorage.getItem("sidebar-collapsed")==="true"),n=w(s.value?"menu-unfold":"menu-fold"),a=w(!1),p=()=>{s.value=!s.value,n.value=s.value?"menu-unfold":"menu-fold",localStorage.setItem("sidebar-collapsed",s.value.toString())};return ne(s,(d,m)=>{ge.emit("sendMenu",s.value)}),oe(()=>{ge.emit("sendMenu",s.value);const d=u=>{a.value=u.matches,u.matches&&(s.value=u.matches)};o.addEventListener("change",d);const m=new Event("change");return Object.defineProperty(m,"matches",{value:o.matches,writable:!1}),o.dispatchEvent(m),()=>{o.removeEventListener("change",d)}}),(d,m)=>{const u=r("t-icon"),c=r("t-menu-item"),l=r("t-tooltip"),Q=r("router-link"),S=r("t-button"),i=r("t-menu");return C(),F(i,{theme:"light",width:d.menuWidth,collapsed:s.value,class:"sidebar-menu"},{logo:t(()=>[g("div",Lo,[g("img",{class:"logo-img",width:s.value?35:"auto",src:Co,alt:"logo"},null,8,So),g("div",Vo,[g("div",Qo,P(s.value?"":"NapCat"),1)])])]),operations:t(()=>[e(S,{disabled:a.value,class:"t-demo-collapse-btn",variant:"text",shape:"square",onClick:p},{icon:t(()=>[e(u,{name:n.value},null,8,["name"])]),_:1},8,["disabled"])]),default:t(()=>[(C(!0),M(te,null,ve(d.menuItems,b=>(C(),F(Q,{key:b.value,to:b.route},{default:t(()=>[e(l,{disabled:!s.value,content:b.label,placement:"right"},{default:t(()=>[e(c,{value:b.value,disabled:b.disabled,class:"menu-item"},{icon:t(()=>[e(u,{name:b.icon},null,8,["name"])]),default:t(()=>[U(" "+P(b.label),1)]),_:2},1032,["value","disabled"])]),_:2},1032,["disabled","content"])]),_:2},1032,["to"]))),128))]),_:1},8,["width","collapsed"])}}}),Z=(k,o)=>{const s=k.__vccOpts||k;for(const[n,a]of o)s[n]=a;return s},Uo=Z(To,[["__scopeId","data-v-125291f0"]]),Mo=z({__name:"NavBottom",props:{menuItems:{}},setup(k){return(o,s)=>{const n=r("t-icon"),a=r("t-menu-item"),p=r("t-tooltip"),d=r("router-link"),m=r("t-head-menu");return C(),F(m,{theme:"light",class:"bottom-menu"},{default:t(()=>[(C(!0),M(te,null,ve(o.menuItems,u=>(C(),F(d,{key:u.value,to:u.route},{default:t(()=>[e(p,{content:u.label,placement:"top"},{default:t(()=>[e(a,{value:u.value,disabled:u.disabled,class:"menu-item"},{icon:t(()=>[e(n,{name:u.icon},null,8,["name"])]),_:2},1032,["value","disabled"])]),_:2},1032,["content"])]),_:2},1032,["to"]))),128))]),_:1})}}}),Po=Z(Mo,[["__scopeId","data-v-e183c6ff"]]),xo={key:0},$o={key:1,class:"bottom-menu"},Io=z({__name:"Dashboard",setup(k){const o=window.matchMedia("(max-width: 768px)"),s=["232px","64px"],n=w([{value:"item1",icon:"dashboard",label:"基础信息",route:"/dashboard/basic-info"},{value:"item3",icon:"wifi-1",label:"网络配置",route:"/dashboard/network-config"},{value:"item4",icon:"setting",label:"其余配置",route:"/dashboard/other-config"},{value:"item5",icon:"system-log",label:"日志查看",route:"/dashboard/log-view"},{value:"item6",icon:"info-circle",label:"关于我们",route:"/dashboard/about-us"}]);return ge.on("sendMenu",a=>{const p=a?s[1]:s[0];ge.emit("sendWidth",p),localStorage.setItem("menuWidth",p.toString()||"0")}),oe(()=>{o.matches&&localStorage.setItem("menuWidth","0")}),Ce(()=>{}),(a,p)=>{const d=r("router-view"),m=r("t-layout");return C(),F(m,{class:"dashboard-container"},{default:t(()=>[V(o).matches?B("",!0):(C(),M("div",xo,[e(Uo,{"menu-items":n.value,class:"sidebar-menu","menu-width":s},null,8,["menu-items"])])),e(m,null,{default:t(()=>[e(d)]),_:1}),V(o).matches?(C(),M("div",$o,[e(Po,{"menu-items":n.value},null,8,["menu-items"])])):B("",!0)]),_:1})}}}),Fo=Z(Io,[["__scopeId","data-v-9522dded"]]),No={},Eo={class:"basic-info"};function Oo(k,o){return C(),M("div",Eo,o[0]||(o[0]=[g("h1",null,"面板基础信息",-1),g("p",null,"这里显示面板的基础信息。",-1)]))}const Ro=Z(No,[["render",Oo]]),Ao="napcat.webui",Bo="1.0.0",Wo="module",jo={"webui:lint":"eslint --fix src/**/*.{js,ts,vue}","webui:dev":"vite --host","webui:build":"vite build","webui:preview":"vite preview"},qo={"eslint-plugin-prettier":"^5.2.1","event-source-polyfill":"^1.0.31",qrcode:"^1.5.4","tdesign-icons-vue-next":"^0.3.3","tdesign-vue-next":"^1.10.3",vue:"^3.5.13","vue-router":"^4.4.5"},zo={"@eslint/eslintrc":"^3.1.0","@eslint/js":"^9.14.0","@types/event-source-polyfill":"^1.0.5","@types/qrcode":"^1.5.5","@vitejs/plugin-legacy":"^5.4.3","@vitejs/plugin-vue":"^5.1.4","eslint-config-prettier":"^9.1.0","eslint-plugin-vue":"^9.31.0",globals:"^15.12.0",terser:"^5.36.0",typescript:"~5.6.2",vite:"^5.4.10","vue-tsc":"^2.1.8"},Re={name:Ao,private:!0,version:Bo,type:Wo,scripts:jo,dependencies:qo,devDependencies:zo},Do="4.2.27";class Go{async GetBaseData(){try{const o=await fetch("https://api.github.com/repos/NapNeko/NapCatQQ",{method:"GET",headers:{"Content-Type":"application/json"}});if(o.status==200)return await o.json()}catch(o){console.error("Error getting  github data :",o)}return null}async GetReleasesData(){try{const o=await fetch("https://api.github.com/repos/NapNeko/NapCatQQ/releases",{method:"GET",headers:{"Content-Type":"application/json"}});if(o.status==200)return await o.json()}catch(o){console.error("Error getting releases data:",o)}return null}async GetPullsData(){try{const o=await fetch("https://api.github.com/repos/NapNeko/NapCatQQ/pulls",{method:"GET",headers:{"Content-Type":"application/json"}});if(o.status==200)return await o.json()}catch(o){console.error("Error getting Pulls data:",o)}return null}async GetContributors(){try{const o=await fetch("https://api.github.com/repos/NapNeko/NapCatQQ/contributors",{method:"GET",headers:{"Content-Type":"application/json"}});if(o.status==200)return await o.json()}catch(o){console.error("Error getting Pulls data:",o)}return null}}const Ho={class:"about-us"},Jo={style:{display:"flex","justify-content":"center","align-items":"center"}},Ko={class:"label-box"},Xo={class:"item-content"},Yo={class:"item-content"},Zo={class:"item-content"},en={class:"item-content"},tn={class:"item-content"},on={class:"item-content"},nn={class:"item-content"},an={class:"item-content"},sn={class:"item-content"},ln=z({__name:"AboutUs",setup(k){const o=new Go,s=w(null),n=w(null),a=w(null),p=w(null),d=async()=>{s.value=await o.GetBaseData(),n.value=await o.GetReleasesData(),a.value=await o.GetContributors(),p.value=await o.GetPullsData()},m=u=>{const c=new Date(u),Q=new Date().getTime()-c.getTime(),S=Math.floor(Q/1e3),i=Math.floor(S/60),b=Math.floor(i/60);return b>0?"".concat(b,"小时"):i>0?"".concat(i,"分钟"):"".concat(S,"秒")};return oe(()=>{d()}),(u,c)=>{const l=r("t-divider"),Q=r("t-alert"),S=r("t-link"),i=r("t-list-item"),b=r("t-tag"),$=r("t-list");return C(),M("div",Ho,[g("div",null,[e(l,{content:"面板关于信息",align:"left"},{content:t(()=>[g("div",Jo,[e(V(tt)),c[0]||(c[0]=g("div",{style:{"margin-left":"5px"}},"面板关于信息",-1))])]),_:1}),e(Q,{theme:"success",class:"header",message:"NapCat.WebUi is running"}),e($,null,{default:t(()=>[e(i,null,{default:t(()=>[g("div",Ko,[e(V(ot),{class:"item-icon",size:"large"}),c[1]||(c[1]=g("span",{class:"item-label"},"Star:",-1))]),g("span",Xo,[e(S,{class:"link-text",href:"https://github.com/NapNeko/NapCatQQ/stargazers"},{default:t(()=>{var _;return[U(P((_=s.value)==null?void 0:_.stargazers_count),1)]}),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(V(nt),{class:"item-icon",size:"large"}),c[2]||(c[2]=g("span",{class:"item-label"},"issues:",-1)),g("span",Yo,[e(S,{class:"link-text",href:"https://github.com/NapNeko/NapCatQQ/issues"},{default:t(()=>{var _;return[U(P((_=s.value)==null?void 0:_.open_issues_count),1)]}),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(V(at),{class:"item-icon",size:"large"}),c[3]||(c[3]=g("span",{class:"item-label"},"Pull Requests:",-1)),g("span",Zo,[e(S,{class:"link-text",href:"https://github.com/NapNeko/NapCatQQ/pulls"},{default:t(()=>{var _;return[U(P((_=p.value)==null?void 0:_.length),1)]}),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(V(st),{class:"item-icon",size:"large"}),c[4]||(c[4]=g("span",{class:"item-label"},"Releases:",-1)),g("span",en,[e(S,{class:"link-text",href:"https://github.com/NapNeko/NapCatQQ/releases"},{default:t(()=>[U(P(n.value&&n.value[0]?m(n.value[0].published_at)+"前更新":""),1)]),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(V(lt),{class:"item-icon",size:"large"}),c[5]||(c[5]=g("span",{class:"item-label"},"Contributors:",-1)),g("span",tn,[e(S,{class:"link-text",href:"https://github.com/NapNeko/NapCatQQ/graphs/contributors"},{default:t(()=>{var _;return[U(P((_=a.value)==null?void 0:_.length),1)]}),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(V(rt),{class:"item-icon",size:"large"}),c[6]||(c[6]=g("span",{class:"item-label"},"Watchers:",-1)),g("span",on,[e(S,{class:"link-text",href:"https://github.com/NapNeko/NapCatQQ/watchers"},{default:t(()=>{var _;return[U(P((_=s.value)==null?void 0:_.watchers),1)]}),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(V(it),{class:"item-icon",size:"large"}),c[7]||(c[7]=g("span",{class:"item-label"},"Fork:",-1)),g("span",nn,[e(S,{class:"link-text",href:"https://github.com/NapNeko/NapCatQQ/fork"},{default:t(()=>{var _;return[U(P((_=s.value)==null?void 0:_.forks_count),1)]}),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(V(ut),{class:"item-icon",size:"large"}),c[8]||(c[8]=g("span",{class:"item-label"},"License:",-1)),g("span",an,[e(S,{class:"link-text",href:"https://github.com/NapNeko/NapCatQQ#License-1-ov-file"},{default:t(()=>{var _;return[U(P((_=s.value)==null?void 0:_.license.key),1)]}),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(V(ct),{class:"item-icon",size:"large"}),c[9]||(c[9]=g("span",{class:"item-label"},"Version:",-1)),g("span",sn,[e(b,{class:"tag-item pgk-color"},{default:t(()=>[U(" WebUi: "+P(V(Re).version),1)]),_:1}),e(b,{class:"tag-item nc-color"},{default:t(()=>{var _;return[U(" NapCat: "+P(n.value&&((_=n.value[0])!=null&&_.tag_name)?n.value[0].tag_name:V(Do)),1)]}),_:1}),e(b,{class:"tag-item td-color"},{default:t(()=>[U(" TDesign: "+P(V(Re).dependencies["tdesign-vue-next"]),1)]),_:1})])]),_:1})]),_:1})])])}}}),rn=Z(ln,[["__scopeId","data-v-8ddd6f0d"]]);let Ae=null;class un{constructor(o,s="../api"){fe(this,"retCredential");fe(this,"apiPrefix");this.retCredential=o,this.apiPrefix=s}async GetLogList(){try{const o=await fetch("".concat(this.apiPrefix,"/Log/GetLogList"),{method:"GET",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(o.status==200){const s=await o.json();if(s.code==0)return s==null?void 0:s.data}}catch(o){console.error("Error getting LogList:",o)}return[]}async GetLog(o){try{const s=await fetch("".concat(this.apiPrefix,"/Log/GetLog?id=").concat(o),{method:"GET",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(s.status==200){const n=await s.json();if(n.code==0)return n==null?void 0:n.data}}catch(s){console.error("Error getting LogData:",s)}return"null"}async getRealTimeLogs(){return this.creatEventSource(),Ae}creatEventSource(){try{Ae=new Qt.EventSourcePolyfill("".concat(this.apiPrefix,"/Log/GetLogRealTime"),{heartbeatTimeout:3*60*1e3,headers:{Authorization:"Bearer "+this.retCredential,Accept:"text/event-stream"},withCredentials:!0})}catch(o){console.error("创建SSE连接出错:",o)}}}const cn={class:"title"},dn={style:{display:"flex","justify-content":"center","align-items":"center"}},pn={class:"tab-box"},mn={class:"card-box"},fn={class:"tag-box"},gn=["id"],vn=z({__name:"Log",setup(k){const o=window.matchMedia("(max-width: 768px)"),s=w("realtime"),n=w(!1),a=w(null);let p=!1;const d=new un(localStorage.getItem("auth")||""),m=w(null),u=w(null),c=w(!1),l=w([{content:"全部",value:1,description:"all"},{content:"调试",value:2,description:"debug"},{content:"提示",value:3,description:"info"},{content:"警告",value:4,description:"warn"},{content:"错误",value:5,description:"error"},{content:"致命",value:5,description:"fatal"}]),Q=w({all:"linear-gradient(60deg,#16a085 0%, #f4d03f 100%)",debug:"linear-gradient(-225deg, #5271c4 0%, #b19fff 48%, #eca1fe 100%)",info:"linear-gradient(-225deg, #22e1ff 0%, #1d8fe1 48%, #625eb1 100%)",warn:"linear-gradient(to right, #e14fad 0%, #f9d423 48%, #e37318 100%)",error:"linear-gradient(to left, #ffe29f 0%, #ffa99f 48%, #d94541 100%)",fatal:"linear-gradient(-225deg, #fd0700, #ec567f)"}),S=w(new Map([["all",[]],["debug",[]],["info",[]],["warn",[]],["error",[]],["fatal",[]]])),i=w(new Map([["all",[]],["debug",[]],["info",[]],["warn",[]],["error",[]],["fatal",[]]])),b=w([]),$=w([]),_=w({content:"全部",value:1,description:"all"}),J=h=>{_.value=h},H=["debug","info","warn","error","fatal"],K=()=>{s.value==="realtime"?X(S):X(i)},X=h=>{_.value&&_.value.description==="all"||!_.value?h.value=new Map([["all",[]],["debug",[]],["info",[]],["warn",[]],["error",[]],["fatal",[]]]):h.value.set(_.value.description,[])},O=()=>{X(S)},_e=()=>{c.value||(u.value=window.setInterval(O,.5*60*1e3))},ce=()=>{u.value&&(window.clearInterval(u.value),c.value=!0)},Se=()=>{c.value&&(_e(),c.value=!1)},Ve=()=>{u.value&&(window.clearInterval(u.value),u.value=null)},ee=h=>{const I=/\[([^\]]+)]/.exec(h);if(I&&I[1]){const N=I[1].toLowerCase();if(H.includes(N))return I[1]}return null},he=(h,T)=>{h.split(/\r\n/).forEach(N=>{if(T==="realtime"){let j=JSON.parse(N);const E=j.level||"other",D=E&&Q.value[E]?Q.value[E]:void 0,q={type:E,content:j.message,color:D,time:""};be(S,E,q)}else if(T==="history"){const A=ee(N)||"other",D=/(\d{2}-\d{2} \d{2}:\d{2}:\d{2})|(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})/.exec(N);let q=D?D[0]:null;const ie=A&&Q.value[A]?Q.value[A]:void 0,ue={type:A,content:N.slice(D?D[0].length:0)||"",color:ie,time:q?q+" ":""};be(i,A,ue)}})},be=(h,T,I)=>{const N=h.value.get("all");if(Array.isArray(N)&&N.push(I),T!=="other"){const j=h.value.get(T);Array.isArray(j)&&j.push(I)}},Qe=h=>{s.value=h},ye=h=>typeof h=="object"&&h!==null&&typeof h.recycleObjectURL=="function",de=h=>{ye(window.URL)&&window.URL.recycleObjectURL(h)},pe=(h,T)=>{try{const I=new Blob([h],{type:"text/plain"}),N=URL.createObjectURL(I),j=document.createElement("a");j.href=N,j.download=T,j.click(),de(N)}catch(I){console.error("下载文本时出现错误:",I)}},Te=()=>{if(s.value==="realtime"){const h=S.value.get(_.value.description);if(h&&h.length>0){const T=h.map(I=>I.content).join("\r\n");pe(T,"实时日志")}else W.error("暂无可下载日志")}else{const h=i.value.get(_.value.description);if(h&&h.length>0){const T=h.map(I=>I.content).join("\r\n");pe(T,"历史日志")}else W.error("暂无可下载日志")}},Ue=async()=>{$.value=[],n.value=!0;const h=await d.GetLogList();X(i),h.length>0?b.value=h.map(T=>({label:T,value:T})):b.value=[]},we=async()=>{if($.value.length>0){for(const h of $.value)try{const T=await d.GetLog(h);T&&T!=="null"&&he(T,"history")}catch(T){console.error("获取日志 ".concat(h," 时出现错误:"),T)}n.value=!1}else W.error("请选择日志")},me=async()=>{m.value=await d.getRealTimeLogs(),m.value&&(m.value.onmessage=h=>{console.log(h.data),he(h.data,"realtime")})},re=async()=>{m.value&&m.value.close()},v=()=>{p||Je(()=>{a.value&&(a.value.scrollTop=a.value.scrollHeight)})},f=()=>{a.value&&new MutationObserver(()=>{v()}).observe(a.value,{childList:!0,subtree:!0})},x=()=>{a.value&&(a.value.style.overflow="auto")},R=()=>{a.value&&(a.value.style.overflow="hidden",p||v())};return ne(S,()=>{p||v()},{immediate:!0}),ne(i,()=>{p||v()},{immediate:!0}),oe(()=>{me(),_e(),a.value=document.querySelector(".content"),a.value&&(a.value.style.overflow="hidden",a.value.addEventListener("mouseenter",()=>{p=!0,x(),ce()}),a.value.addEventListener("mouseleave",()=>{p=!1,R(),Se(),setTimeout(()=>{v()},1e3)}),f())}),Ce(()=>{re(),Ve()}),(h,T)=>{const I=r("t-divider"),N=r("t-tab-panel"),j=r("t-tabs"),A=r("t-button"),E=r("t-tooltip"),D=r("t-col"),q=r("t-tag"),ie=r("t-dropdown"),ue=r("t-row"),Me=r("t-card"),Pe=r("t-select"),xe=r("t-dialog");return C(),M(te,null,[g("div",cn,[e(I,{content:"日志查看",align:"left"},{content:t(()=>[g("div",dn,[e(V(dt)),T[2]||(T[2]=g("div",{style:{"margin-left":"5px"}},"日志查看",-1))])]),_:1})]),g("div",pn,[e(j,{"default-value":"realtime",onChange:Qe},{default:t(()=>[e(N,{value:"realtime",label:"实时日志"}),e(N,{value:"history",label:"历史日志"})]),_:1})]),g("div",mn,[e(Me,{class:"card",bordered:!0},{actions:t(()=>[e(ue,{align:"middle",justify:"center",style:ae({gap:V(o).matches?"5px":"24px"})},{default:t(()=>[e(D,{flex:"auto",style:{display:"inline-flex","justify-content":"center"}},{default:t(()=>[e(E,{content:"清理日志"},{default:t(()=>[e(A,{variant:"text",shape:"square",onClick:K},{default:t(()=>[e(V(pt))]),_:1})]),_:1})]),_:1}),e(D,{flex:"auto",style:{display:"inline-flex","justify-content":"center"}},{default:t(()=>[e(E,{content:"下载日志"},{default:t(()=>[e(A,{variant:"text",shape:"square",onClick:Te},{default:t(()=>[e(V(mt))]),_:1})]),_:1})]),_:1}),s.value==="history"?(C(),F(D,{key:0,flex:"auto",style:{display:"inline-flex","justify-content":"center"}},{default:t(()=>[e(E,{content:"历史日志"},{default:t(()=>[e(A,{variant:"text",shape:"square",onClick:Ue},{default:t(()=>[e(V(ft))]),_:1})]),_:1})]),_:1})):B("",!0),e(D,{flex:"auto",style:{display:"inline-flex","justify-content":"center"}},{default:t(()=>[g("div",fn,[e(q,{class:"t-tag",style:ae({backgroundImage:Q.value[_.value.description]})},{default:t(()=>[U(P(_.value.content),1)]),_:1},8,["style"])]),e(ie,{options:l.value,"min-column-width":112,onClick:J},{default:t(()=>[e(A,{variant:"text",shape:"square"},{default:t(()=>[e(V(gt))]),_:1})]),_:1},8,["options"])]),_:1})]),_:1},8,["style"])]),content:t(()=>[g("div",{class:"content",ref_key:"contentBox",ref:a},[(C(!0),M(te,null,ve(s.value==="realtime"?S.value.get(_.value.description):i.value.get(_.value.description),Y=>(C(),M("div",null,[g("span",null,P(Y.time),1),g("span",{id:Y.type},P(Y.content),9,gn)]))),256))],512)]),_:1})]),e(xe,{visible:n.value,"onUpdate:visible":T[1]||(T[1]=Y=>n.value=Y),header:"历史日志","destroy-on-close":!0,"show-in-attached-element":!0,"on-confirm":we,class:".t-dialog__ctx .t-dialog__position"},{default:t(()=>[e(Pe,{modelValue:$.value,"onUpdate:modelValue":T[0]||(T[0]=Y=>$.value=Y),options:b.value,placeholder:"请选择日志",multiple:!0,style:{"text-align":"left"}},null,8,["modelValue","options"])]),_:1},8,["visible"])],64)}}}),_n=Z(vn,[["__scopeId","data-v-9ed44cc0"]]),Le=k=>k,hn=Le({name:"http-server",enable:!1,port:3e3,host:"0.0.0.0",enableCors:!0,enableWebsocket:!0,messagePostFormat:"array",token:"",debug:!1}),bn=Le({name:"http-client",enable:!1,url:"http://localhost:8080",messagePostFormat:"array",reportSelfMessage:!1,token:"",debug:!1}),yn=Le({name:"websocket-server",enable:!1,host:"0.0.0.0",port:3001,messagePostFormat:"array",reportSelfMessage:!1,token:"",enableForcePushEvent:!0,debug:!1,heartInterval:3e4}),wn=Le({name:"websocket-client",enable:!1,url:"ws://localhost:8082",messagePostFormat:"array",reportSelfMessage:!1,reconnectInterval:5e3,token:"",debug:!1,heartInterval:3e4});function kn(k,o){return{...k,...o}}const Cn=k=>k,Ln=Cn({network:{httpServers:[],httpClients:[],websocketServers:[],websocketClients:[]},musicSignUrl:"",enableLocalFile2Url:!1,parseMultMsg:!0}),$e={httpServers:hn,httpClients:bn,websocketServers:yn,websocketClients:wn};function Sn(k,o=Ln){const s={...o};if(k.network){s.network={...o.network};for(const n in k.network){const a=k.network[n],p=$e[n];Array.isArray(a)&&(s.network[n]=a.map(d=>kn(p,d)))}}return k.musicSignUrl!==void 0&&(s.musicSignUrl=k.musicSignUrl),k.enableLocalFile2Url!==void 0&&(s.enableLocalFile2Url=k.enableLocalFile2Url),k.parseMultMsg!==void 0&&(s.parseMultMsg=k.parseMultMsg),s}const Vn=z({__name:"HttpServerComponent",props:{config:{}},setup(k){const o=k,s=w([{label:"Array",value:"array"},{label:"String",value:"string"}]);return ne(()=>o.config.messagePostFormat,n=>{n!=="array"&&n!=="string"&&(o.config.messagePostFormat="array")}),(n,a)=>{const p=r("t-switch"),d=r("t-form-item"),m=r("t-input"),u=r("t-select"),c=r("t-form");return C(),M("div",null,[e(c,{labelAlign:"left"},{default:t(()=>[e(d,{label:"启用"},{default:t(()=>[e(p,{modelValue:n.config.enable,"onUpdate:modelValue":a[0]||(a[0]=l=>n.config.enable=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"端口"},{default:t(()=>[e(m,{modelValue:n.config.port,"onUpdate:modelValue":a[1]||(a[1]=l=>n.config.port=l),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),e(d,{label:"主机"},{default:t(()=>[e(m,{modelValue:n.config.host,"onUpdate:modelValue":a[2]||(a[2]=l=>n.config.host=l),type:"text"},null,8,["modelValue"])]),_:1}),e(d,{label:"启用 CORS"},{default:t(()=>[e(p,{modelValue:n.config.enableCors,"onUpdate:modelValue":a[3]||(a[3]=l=>n.config.enableCors=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"启用 WS"},{default:t(()=>[e(p,{modelValue:n.config.enableWebsocket,"onUpdate:modelValue":a[4]||(a[4]=l=>n.config.enableWebsocket=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"消息格式"},{default:t(()=>[e(u,{modelValue:n.config.messagePostFormat,"onUpdate:modelValue":a[5]||(a[5]=l=>n.config.messagePostFormat=l),options:s.value},null,8,["modelValue","options"])]),_:1}),e(d,{label:"Token"},{default:t(()=>[e(m,{modelValue:n.config.token,"onUpdate:modelValue":a[6]||(a[6]=l=>n.config.token=l),type:"text"},null,8,["modelValue"])]),_:1}),e(d,{label:"调试模式"},{default:t(()=>[e(p,{modelValue:n.config.debug,"onUpdate:modelValue":a[7]||(a[7]=l=>n.config.debug=l)},null,8,["modelValue"])]),_:1})]),_:1})])}}}),Qn=z({__name:"HttpClientComponent",props:{config:{}},setup(k){const o=k,s=w([{label:"Array",value:"array"},{label:"String",value:"string"}]);return ne(()=>o.config.messagePostFormat,n=>{n!=="array"&&n!=="string"&&(o.config.messagePostFormat="array")}),(n,a)=>{const p=r("t-switch"),d=r("t-form-item"),m=r("t-input"),u=r("t-select"),c=r("t-form");return C(),M("div",null,[e(c,{labelAlign:"left"},{default:t(()=>[e(d,{label:"启用"},{default:t(()=>[e(p,{modelValue:n.config.enable,"onUpdate:modelValue":a[0]||(a[0]=l=>n.config.enable=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"URL"},{default:t(()=>[e(m,{modelValue:n.config.url,"onUpdate:modelValue":a[1]||(a[1]=l=>n.config.url=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"消息格式"},{default:t(()=>[e(u,{modelValue:n.config.messagePostFormat,"onUpdate:modelValue":a[2]||(a[2]=l=>n.config.messagePostFormat=l),options:s.value},null,8,["modelValue","options"])]),_:1}),e(d,{label:"报告自身消息"},{default:t(()=>[e(p,{modelValue:n.config.reportSelfMessage,"onUpdate:modelValue":a[3]||(a[3]=l=>n.config.reportSelfMessage=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"Token"},{default:t(()=>[e(m,{modelValue:n.config.token,"onUpdate:modelValue":a[4]||(a[4]=l=>n.config.token=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"调试模式"},{default:t(()=>[e(p,{modelValue:n.config.debug,"onUpdate:modelValue":a[5]||(a[5]=l=>n.config.debug=l)},null,8,["modelValue"])]),_:1})]),_:1})])}}}),Tn=z({__name:"WebsocketServerComponent",props:{config:{}},setup(k){const o=k,s=w([{label:"Array",value:"array"},{label:"String",value:"string"}]);return ne(()=>o.config.messagePostFormat,n=>{n!=="array"&&n!=="string"&&(o.config.messagePostFormat="array")}),(n,a)=>{const p=r("t-switch"),d=r("t-form-item"),m=r("t-input"),u=r("t-select"),c=r("t-form");return C(),M("div",null,[e(c,{labelAlign:"left"},{default:t(()=>[e(d,{label:"启用"},{default:t(()=>[e(p,{modelValue:n.config.enable,"onUpdate:modelValue":a[0]||(a[0]=l=>n.config.enable=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"主机"},{default:t(()=>[e(m,{modelValue:n.config.host,"onUpdate:modelValue":a[1]||(a[1]=l=>n.config.host=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"端口"},{default:t(()=>[e(m,{modelValue:n.config.port,"onUpdate:modelValue":a[2]||(a[2]=l=>n.config.port=l),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),e(d,{label:"消息格式"},{default:t(()=>[e(u,{modelValue:n.config.messagePostFormat,"onUpdate:modelValue":a[3]||(a[3]=l=>n.config.messagePostFormat=l),options:s.value},null,8,["modelValue","options"])]),_:1}),e(d,{label:"上报自身消息"},{default:t(()=>[e(p,{modelValue:n.config.reportSelfMessage,"onUpdate:modelValue":a[4]||(a[4]=l=>n.config.reportSelfMessage=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"Token"},{default:t(()=>[e(m,{modelValue:n.config.token,"onUpdate:modelValue":a[5]||(a[5]=l=>n.config.token=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"强制推送事件"},{default:t(()=>[e(p,{modelValue:n.config.enableForcePushEvent,"onUpdate:modelValue":a[6]||(a[6]=l=>n.config.enableForcePushEvent=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"调试模式"},{default:t(()=>[e(p,{modelValue:n.config.debug,"onUpdate:modelValue":a[7]||(a[7]=l=>n.config.debug=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"心跳间隔"},{default:t(()=>[e(m,{modelValue:n.config.heartInterval,"onUpdate:modelValue":a[8]||(a[8]=l=>n.config.heartInterval=l),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1})]),_:1})])}}}),Un=z({__name:"WebsocketClientComponent",props:{config:{}},setup(k){const o=k,s=w([{label:"Array",value:"array"},{label:"String",value:"string"}]);return ne(()=>o.config.messagePostFormat,n=>{n!=="array"&&n!=="string"&&(o.config.messagePostFormat="array")}),(n,a)=>{const p=r("t-switch"),d=r("t-form-item"),m=r("t-input"),u=r("t-select"),c=r("t-form");return C(),M("div",null,[e(c,{labelAlign:"left"},{default:t(()=>[e(d,{label:"启用"},{default:t(()=>[e(p,{modelValue:n.config.enable,"onUpdate:modelValue":a[0]||(a[0]=l=>n.config.enable=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"URL"},{default:t(()=>[e(m,{modelValue:n.config.url,"onUpdate:modelValue":a[1]||(a[1]=l=>n.config.url=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"消息格式"},{default:t(()=>[e(u,{modelValue:n.config.messagePostFormat,"onUpdate:modelValue":a[2]||(a[2]=l=>n.config.messagePostFormat=l),options:s.value},null,8,["modelValue","options"])]),_:1}),e(d,{label:"报告自身消息"},{default:t(()=>[e(p,{modelValue:n.config.reportSelfMessage,"onUpdate:modelValue":a[3]||(a[3]=l=>n.config.reportSelfMessage=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"Token"},{default:t(()=>[e(m,{modelValue:n.config.token,"onUpdate:modelValue":a[4]||(a[4]=l=>n.config.token=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"调试模式"},{default:t(()=>[e(p,{modelValue:n.config.debug,"onUpdate:modelValue":a[5]||(a[5]=l=>n.config.debug=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"心跳间隔"},{default:t(()=>[e(m,{modelValue:n.config.heartInterval,"onUpdate:modelValue":a[6]||(a[6]=l=>n.config.heartInterval=l),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1})]),_:1})])}}});class le{constructor(o,s="../api"){fe(this,"retCredential");fe(this,"apiPrefix");this.retCredential=o,this.apiPrefix=s}async GetOB11Config(){try{const o=await fetch("".concat(this.apiPrefix,"/OB11Config/GetConfig"),{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(o.status==200){const s=await o.json();if(s.code==0)return s==null?void 0:s.data}}catch(o){console.error("Error getting OB11 config:",o)}return{}}async SetOB11Config(o){try{const s=await fetch("".concat(this.apiPrefix,"/OB11Config/SetConfig"),{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"},body:JSON.stringify({config:JSON.stringify(o)})});if(s.status==200&&(await s.json()).code==0)return!0}catch(s){console.error("Error setting OB11 config:",s)}return!1}async checkQQLoginStatus(){try{const o=await fetch("".concat(this.apiPrefix,"/QQLogin/CheckLoginStatus"),{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(o.status==200){const s=await o.json();if(s.code==0)return s.data.isLogin}}catch(o){console.error("Error checking QQ login status:",o)}return!1}async checkQQLoginStatusWithQrcode(){try{const o=await fetch("".concat(this.apiPrefix,"/QQLogin/CheckLoginStatus"),{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(o.status==200){const s=await o.json();if(s.code==0)return s.data}}catch(o){console.error("Error checking QQ login status:",o)}}async checkWebUiLogined(){try{const o=await fetch("".concat(this.apiPrefix,"/auth/check"),{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(o.status==200&&(await o.json()).code==0)return!0}catch(o){console.error("Error checking web UI login status:",o)}return!1}async loginWithToken(o){try{const n=await(await fetch("".concat(this.apiPrefix,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o})})).json();if(n.code===0)return this.retCredential=n.data.Credential,this.retCredential}catch(s){console.error("Error logging in with token:",s)}return null}async getQQLoginQrcode(){try{const o=await fetch("".concat(this.apiPrefix,"/QQLogin/GetQQLoginQrcode"),{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(o.status==200){const s=await o.json();if(s.code==0)return s.data.qrcode||""}}catch(o){console.error("Error getting QQ login QR code:",o)}return""}async getQQQuickLoginList(){try{const o=await fetch("".concat(this.apiPrefix,"/QQLogin/GetQuickLoginList"),{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(o.status==200){const s=await o.json();if(s.code==0)return s.data||[]}}catch(o){console.error("Error getting QQ quick login list:",o)}return[]}async setQuickLogin(o){try{const s=await fetch("".concat(this.apiPrefix,"/QQLogin/SetQuickLogin"),{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"},body:JSON.stringify({uin:o})});if(s.status==200){const n=await s.json();return n.code==0?{result:!0,errMsg:""}:{result:!1,errMsg:n.message}}}catch(s){console.error("Error setting quick login:",s)}return{result:!1,errMsg:"接口异常"}}}const Mn={style:{display:"flex","justify-content":"center","align-items":"center"}},Pn={key:0,id:"alice",style:{height:"80vh",position:"relative"}},xn={class:"setting-content"},$n={key:0,class:"local-box"},In={class:"local"},Fn={key:1,class:"local-box"},Nn={class:"local"},En={key:0,class:"token-view"},On={key:1},Rn=["onClick"],An={slot:"body",class:"dialog-body"},Bn=z({__name:"NetWork",setup(k){const o=w(!1),s=w(!0),n=w(0),a=w(0),p=w(0),d=w(0),m=window.matchMedia("(min-width: 768px) and (max-width: 1024px)"),u=window.matchMedia("(min-width: 1025px)"),c=w(null),l=w(null),Q=w(!1),S=w(!1),i=w({name:"",data:{},type:""}),b=w(""),$={httpServers:Vn,httpClients:Qn,websocketServers:Tn,websocketClients:Un},_=w(""),J=w(0),H={websocketClients:[],websocketServers:[],httpClients:[],httpServers:[]},K=w(new Map([["all",[]],["httpServers",[]],["httpClients",[]],["websocketServers",[]],["websocketClients",[]]])),X={httpServers:"HTTP 服务器",httpClients:"HTTP 客户端",websocketServers:"WebSocket 服务器",websocketClients:"WebSocket 客户端"},O=w([]),_e=v=>$[v],ce=(v,f)=>{var x;return(x=Object.entries(v).find(([R,h])=>h===f))==null?void 0:x[0]},Se=()=>{b.value="添加配置",i.value={name:"",data:{},type:""},_.value="add",S.value=!0},Ve=v=>{b.value="修改配置";const f=ce(X,v.type);f&&(i.value={name:v.name,data:v,type:f}),_.value="edit",J.value=H[i.value.type].findIndex(x=>x.name===v.name),S.value=!0},ee=async(v,f)=>{const x=ce(X,v.type),R={...v};R[f]=!v[f],x&&(i.value={name:v.name,data:R,type:x}),_.value="edit",J.value=H[i.value.type].findIndex(h=>h.name===v.name),await de()},he=v=>{const f=ce(X,v.type);f&&(i.value={name:v.name,data:v,type:f}),J.value=J.value=H[i.value.type].findIndex(x=>x.name===v.name),_.value="delete",de()},be=v=>{O.value=K.value.get(v)},Qe=v=>{i.value.data=structuredClone($e[v])},ye=v=>{var x;const f=(x=K.value.get("all"))==null?void 0:x.findIndex(R=>R.name===v);return i.value.name===""||i.value.type===""?(W.error("请填写完整信息"),!1):f===-1||i.value.data.name===v?!0:(W.error("名称已存在"),!1)},de=async()=>{if(_.value=="add"){if(!ye(i.value.name))return;i.value.data.name=i.value.name,H[i.value.type].push(i.value.data)}else if(_.value=="edit"){if(!ye(i.value.name))return;i.value.data.name=i.value.name,H[i.value.type][J.value]=i.value.data}else _.value=="delete"&&H[i.value.type].splice(J.value,1);const v=await pe();if(!v)return;v.network=H,await Te(v)?(_.value="",J.value=0,W.success("配置保存成功"),await we(),S.value=!1):W.error("配置保存失败")},pe=async()=>{const v=localStorage.getItem("auth");if(!v){console.error("No stored credential found");return}return await new le(v).GetOB11Config()},Te=async v=>{const f=localStorage.getItem("auth");return f?await new le(f).SetOB11Config(v):(console.error("No stored credential found"),!1)},Ue=v=>{O.value=[],K.value.set("all",[]);for(const f in v){const x=v[f];if(f in $e){H[f]=[...x];const R=x.map(T=>({...T,type:X[f]}));K.value.set(f,R);const h=K.value.get("all");if(h){const T=[...h,...R];K.value.set("all",T)}O.value=K.value.get("all")}}},we=async()=>{try{const v=await pe();if(!v)return;const f=Sn(v);Ue(f.network)}catch(v){console.error("Error loading config:",v)}},me=async v=>{const f=document.createElement("textarea");f.value=v,document.body.appendChild(f),f.select();try{document.execCommand("copy"),W.success("复制成功")}catch(x){console.error("复制失败",x)}finally{document.body.removeChild(f)}},re=()=>{n.value=window.innerWidth-41-a.value,m.matches?p.value=(n.value-20)/2:u.matches?p.value=(n.value-40)/3:p.value=n.value,Q.value=!0,setTimeout(()=>{var v,f,x,R;d.value=window.innerHeight-((f=(v=c.value)==null?void 0:v.offsetHeight)!=null?f:0)-((R=(x=l.value)==null?void 0:x.offsetHeight)!=null?R:0)-21},300)};return ge.on("sendWidth",v=>{if(typeof v=="string"){const f=v;a.value=parseInt(f)}}),ne(a,(v,f)=>{Q.value=!1,setTimeout(()=>{re()},300)}),oe(()=>{we();const v=localStorage.getItem("menuWidth");v&&(a.value=parseInt(v),setTimeout(()=>{re()},300)),window.addEventListener("resize",()=>{setTimeout(()=>{re()},300)})}),Ce(()=>{window.removeEventListener("resize",()=>{setTimeout(()=>{re()},300)})}),(v,f)=>{const x=r("t-divider"),R=r("t-button"),h=r("t-tab-panel"),T=r("t-tabs"),I=r("t-loading"),N=r("t-popconfirm"),j=r("t-space"),A=r("t-card"),E=r("t-tag"),D=r("t-popup"),q=r("t-descriptions-item"),ie=r("t-descriptions"),ue=r("t-collapse-panel"),Me=r("t-collapse"),Pe=r("t-empty"),xe=r("t-input"),Y=r("t-form-item"),ke=r("t-option"),We=r("t-select"),je=r("t-form"),qe=r("t-dialog");return C(),M(te,null,[g("div",{ref_key:"headerBox",ref:c,class:"title"},[e(x,{content:"网络配置",align:"left"},{content:t(()=>[g("div",Mn,[e(V(vt)),f[6]||(f[6]=g("div",{style:{"margin-left":"5px"}},"网络配置",-1))])]),_:1}),e(x,{align:"right"},{default:t(()=>[e(R,{onClick:f[0]||(f[0]=y=>Se())},{icon:t(()=>[e(V(_t))]),default:t(()=>[f[7]||(f[7]=U(" 添加配置"))]),_:1})]),_:1})],512),Q.value?(C(),M("div",{key:0,ref_key:"setting",ref:l,class:"setting"},[e(T,{ref:"tabsRef",style:ae({width:n.value+"px"}),"default-value":"all",onChange:be},{default:t(()=>[e(h,{value:"all",label:"全部"}),e(h,{value:"httpServers",label:"HTTP 服务器"}),e(h,{value:"httpClients",label:"HTTP 客户端"}),e(h,{value:"websocketServers",label:"WebSocket 服务器"}),e(h,{value:"websocketClients",label:"WebSocket 客户端"})]),_:1},8,["style"])],512)):B("",!0),e(I,{attach:"#alice",loading:!Q.value,showOverlay:!1},{default:t(()=>[Q.value?B("",!0):(C(),M("div",Pn))]),_:1},8,["loading"]),Q.value?(C(),M("div",{key:1,class:"card-box",style:ae({width:n.value+"px"})},[O.value.length>0?(C(),M("div",{key:0,class:"setting-box",style:ae({maxHeight:d.value+"px"})},[(C(!0),M(te,null,ve(O.value,(y,ze)=>(C(),M("div",{key:ze},[e(A,{title:y.name,description:y.type,style:ae({width:p.value+"px"}),"header-bordered":!0,class:"setting-card"},{actions:t(()=>[e(j,null,{default:t(()=>[e(V(ht),{size:"20px",onClick:G=>Ve(y)},null,8,["onClick"]),e(N,{content:"确认删除",onConfirm:G=>he(y)},{default:t(()=>[e(V(bt),{size:"20px"})]),_:2},1032,["onConfirm"])]),_:2},1024)]),default:t(()=>[g("div",xn,[e(A,{class:"card-address",style:ae({borderLeft:"7px solid "+(y.enable?"var(--td-success-color)":"var(--td-error-color)")})},{default:t(()=>[y.host&&y.port?(C(),M("div",$n,[e(V(Ee),{class:"local-icon",size:"20px",onClick:G=>ee(y,"enable")},null,8,["onClick"]),g("strong",In,P(y.host)+":"+P(y.port),1),e(V(Oe),{class:"copy-icon",size:"20px",onClick:G=>me(y.host+":"+y.port)},null,8,["onClick"])])):B("",!0),y.url?(C(),M("div",Fn,[e(V(Ee),{class:"local-icon",size:"20px",onClick:G=>ee(y,"enable")},null,8,["onClick"]),g("strong",Nn,P(y.url),1),e(V(Oe),{class:"copy-icon",size:"20px",onClick:G=>me(y.url)},null,8,["onClick"])])):B("",!0)]),_:2},1032,["style"]),e(Me,{"default-value":[0],"expand-mutex":"",style:{"margin-top":"10px"},class:"info-coll"},{default:t(()=>[e(ue,{header:"基础信息"},{default:t(()=>[e(ie,{size:"small",layout:s.value?"vertical":"horizontal",class:"setting-base-info"},{default:t(()=>[y.token?(C(),F(q,{key:0,label:"连接密钥"},{default:t(()=>[V(m).matches||V(u).matches?(C(),M("div",En,[g("span",null,P(o.value?y.token:"******"),1),o.value?(C(),F(V(yt),{key:0,class:"browse-icon",size:"18px",onClick:f[1]||(f[1]=G=>o.value=!1)})):(C(),F(V(wt),{key:1,class:"browse-icon",size:"18px",onClick:f[2]||(f[2]=G=>o.value=!0)}))])):(C(),M("div",On,[e(D,{showArrow:!0,trigger:"click"},{content:t(()=>[g("div",{onClick:G=>me(y.token)},P(y.token),9,Rn)]),default:t(()=>[e(E,{theme:"primary"},{default:t(()=>f[8]||(f[8]=[U("点击查看")])),_:1})]),_:2},1024)]))]),_:2},1024)):B("",!0),e(q,{label:"消息格式"},{default:t(()=>[U(P(y.messagePostFormat),1)]),_:2},1024)]),_:2},1032,["layout"])]),_:2},1024),e(ue,{header:"状态信息"},{default:t(()=>[e(ie,{size:"small",layout:s.value?"vertical":"horizontal",class:"setting-base-info"},{default:t(()=>[y.hasOwnProperty("debug")?(C(),F(q,{key:0,label:"调试日志"},{default:t(()=>[e(E,{class:se(y.debug?"tag-item-on":"tag-item-off"),onClick:G=>ee(y,"debug")},{default:t(()=>[U(P(y.debug?"开启":"关闭"),1)]),_:2},1032,["class","onClick"])]),_:2},1024)):B("",!0),y.hasOwnProperty("enableWebsocket")?(C(),F(q,{key:1,label:"Websocket 功能"},{default:t(()=>[e(E,{class:se(y.enableWebsocket?"tag-item-on":"tag-item-off"),onClick:G=>ee(y,"enableWebsocket")},{default:t(()=>[U(P(y.enableWebsocket?"启用":"禁用"),1)]),_:2},1032,["class","onClick"])]),_:2},1024)):B("",!0),y.hasOwnProperty("enableCors")?(C(),F(q,{key:2,label:"跨域放行"},{default:t(()=>[e(E,{class:se(y.enableCors?"tag-item-on":"tag-item-off"),onClick:G=>ee(y,"enableCors")},{default:t(()=>[U(P(y.enableCors?"开启":"关闭"),1)]),_:2},1032,["class","onClick"])]),_:2},1024)):B("",!0),y.hasOwnProperty("enableForcePushEvent")?(C(),F(q,{key:3,label:"上报自身消息"},{default:t(()=>[e(E,{class:se(y.reportSelfMessage?"tag-item-on":"tag-item-off"),onClick:G=>ee(y,"reportSelfMessage")},{default:t(()=>[U(P(y.reportSelfMessage?"开启":"关闭"),1)]),_:2},1032,["class","onClick"])]),_:2},1024)):B("",!0),y.hasOwnProperty("enableForcePushEvent")?(C(),F(q,{key:4,label:"强制推送事件"},{default:t(()=>[e(E,{class:se(["tag-item",y.enableForcePushEvent?"tag-item-on":"tag-item-off"]),onClick:G=>ee(y,"enableForcePushEvent")},{default:t(()=>[U(P(y.enableForcePushEvent?"开启":"关闭"),1)]),_:2},1032,["class","onClick"])]),_:2},1024)):B("",!0)]),_:2},1032,["layout"])]),_:2},1024)]),_:2},1024)])]),_:2},1032,["title","description","style"])]))),128)),f[9]||(f[9]=g("div",{style:{height:"20vh"}},null,-1))],4)):(C(),F(A,{key:1},{default:t(()=>[e(Pe,{class:"card-none",title:"暂无网络配置"})]),_:1}))],4)):B("",!0),e(qe,{visible:S.value,"onUpdate:visible":f[5]||(f[5]=y=>S.value=y),header:b.value,"destroy-on-close":!0,"show-in-attached-element":!0,"on-confirm":de,class:".t-dialog__ctx .t-dialog__position"},{default:t(()=>[g("div",An,[e(je,{ref:"form",data:i.value,labelAlign:"left",model:i.value},{default:t(()=>[e(Y,{style:{"text-align":"left"},rules:[{required:!0,message:"请输入名称",trigger:"blur"}],label:"名称",name:"name"},{default:t(()=>[e(xe,{modelValue:i.value.name,"onUpdate:modelValue":f[3]||(f[3]=y=>i.value.name=y)},null,8,["modelValue"])]),_:1}),e(Y,{style:{"text-align":"left"},rules:[{required:!0,message:"请选择类型",trigger:"change"}],label:"类型",name:"type"},{default:t(()=>[e(We,{modelValue:i.value.type,"onUpdate:modelValue":f[4]||(f[4]=y=>i.value.type=y),onChange:Qe},{default:t(()=>[e(ke,{value:"httpServers"},{default:t(()=>f[10]||(f[10]=[U("HTTP 服务器")])),_:1}),e(ke,{value:"httpClients"},{default:t(()=>f[11]||(f[11]=[U("HTTP 客户端")])),_:1}),e(ke,{value:"websocketServers"},{default:t(()=>f[12]||(f[12]=[U("WebSocket 服务器")])),_:1}),e(ke,{value:"websocketClients"},{default:t(()=>f[13]||(f[13]=[U("WebSocket 客户端")])),_:1})]),_:1},8,["modelValue"])]),_:1}),g("div",null,[(C(),F(Ie(Ie(_e(i.value.type))),{config:i.value.data},null,8,["config"]))])]),_:1},8,["data","model"])])]),_:1},8,["visible","header"])],64)}}}),Wn=Z(Bn,[["__scopeId","data-v-b6532754"]]),jn={class:"login-container"},qn={class:"login-methods"},zn={id:"quick-login-dropdown",class:"login-form"},Dn={id:"qrcode",class:"qrcode"},Gn=z({__name:"QQLogin",setup(k){const o=Be(),s=w("quick"),n=w([]),a=w(""),p=w(null),d=new le(localStorage.getItem("auth")||"");let m=null,u="";const c=async i=>{const{result:b,errMsg:$}=await d.setQuickLogin(i);b?(m&&clearInterval(m),await W.success("登录成功即将跳转"),await o.push({path:"/dashboard/basic-info"})):await W.error("登录失败,"+$)},l=(i,b)=>{if(!b){console.error("Canvas element not found");return}bo.toCanvas(b,i,function($){$?console.error("Error generating QR Code:",$):console.log("QR Code generated!")})},Q=async()=>{const i=await d.checkQQLoginStatusWithQrcode();i!=null&&i.isLogin?(m&&clearInterval(m),await W.success("登录成功即将跳转"),await o.push({path:"/dashboard/basic-info"})):i!=null&&i.qrcodeurl&&u!==i.qrcodeurl&&(u=i.qrcodeurl,l(u,p.value))},S=async()=>{n.value=await d.getQQQuickLoginList(),u=await d.getQQLoginQrcode(),l(u,p.value),m=window.setInterval(Q,3e3)};return oe(()=>{S()}),(i,b)=>{const $=r("t-button"),_=r("t-tooltip"),J=r("t-option"),H=r("t-select"),K=r("t-footer"),X=r("t-card");return C(),F(X,{class:"layout",bordered:!1},{default:t(()=>[g("div",jn,[b[5]||(b[5]=g("h2",{class:"sotheby-font"},"QQ Login",-1)),g("div",qn,[e(_,{content:"快速登录"},{default:t(()=>[e($,{id:"quick-login",class:se(["login-method",{active:s.value==="quick"}]),onClick:b[0]||(b[0]=O=>s.value="quick")},{default:t(()=>b[3]||(b[3]=[U("Quick Login")])),_:1},8,["class"])]),_:1}),e(_,{content:"二维码登录"},{default:t(()=>[e($,{id:"qrcode-login",class:se(["login-method",{active:s.value==="qrcode"}]),onClick:b[1]||(b[1]=O=>s.value="qrcode")},{default:t(()=>b[4]||(b[4]=[U("QR Code")])),_:1},8,["class"])]),_:1})]),Fe(g("div",zn,[e(H,{id:"quick-login-select",modelValue:a.value,"onUpdate:modelValue":b[2]||(b[2]=O=>a.value=O),placeholder:"Select Account",onChange:c},{default:t(()=>[(C(!0),M(te,null,ve(n.value,O=>(C(),F(J,{key:O,value:O},{default:t(()=>[U(P(O),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],512),[[Ne,s.value==="quick"]]),Fe(g("div",Dn,[g("canvas",{ref_key:"qrcodeCanvas",ref:p},null,512)],512),[[Ne,s.value==="qrcode"]])]),e(K,{class:"footer"},{default:t(()=>b[6]||(b[6]=[U("Power By NapCat.WebUi")])),_:1})]),_:1})}}}),Hn=Z(Gn,[["__scopeId","data-v-b2627c4e"]]),Jn={class:"login-container"},Kn=z({__name:"WebUiLogin",setup(k){const o=Be(),s=Ke({token:""}),n=async u=>{localStorage.setItem("auth",u),await p()},a=u=>{W.error(u)},p=async()=>{const u=localStorage.getItem("auth");if(!u)return;const c=new le(u),l=await c.checkWebUiLogined();if(console.log("isWenUiLoggedIn",l),!l)return;await c.checkQQLoginStatus()?await o.push({path:"/dashboard/basic-info"}):await o.push({path:"/qqlogin"})},d=async u=>{const l=await new le("").loginWithToken(u);l?await n(l):a("登录失败，请检查Token")};oe(()=>{const c=new URL(window.location.href).searchParams.get("token");c&&d(c),p()});const m=async({validateResult:u})=>{u?await d(s.token):a("请填写Token")};return(u,c)=>{const l=r("t-input"),Q=r("t-form-item"),S=r("t-button"),i=r("t-form"),b=r("t-footer"),$=r("t-card");return C(),F($,{class:"layout",bordered:!1},{default:t(()=>[g("div",Jn,[c[2]||(c[2]=g("h2",{class:"sotheby-font"},"WebUi Login",-1)),e(i,{ref:"form",data:s,colon:"","label-width":0,onSubmit:m},{default:t(()=>[e(Q,{name:"password"},{default:t(()=>[e(l,{modelValue:s.token,"onUpdate:modelValue":c[0]||(c[0]=_=>s.token=_),type:"password",clearable:"",placeholder:"请输入Token"},{"prefix-icon":t(()=>[e(V(kt))]),_:1},8,["modelValue"])]),_:1}),e(Q,null,{default:t(()=>[e(S,{theme:"primary",type:"submit",block:""},{default:t(()=>c[1]||(c[1]=[U("登录")])),_:1})]),_:1})]),_:1},8,["data"])]),e(b,{class:"footer"},{default:t(()=>c[3]||(c[3]=[U("Power By NapCat.WebUi")])),_:1})]),_:1})}}}),Xn=Z(Kn,[["__scopeId","data-v-27371bf8"]]),Yn={class:"title"},Zn={style:{display:"flex","justify-content":"center","align-items":"center"}},ea={class:"other-config-container"},ta={class:"other-config"},oa={class:"button-container"},na=z({__name:"OtherConfig",setup(k){const o=w({musicSignUrl:"",enableLocalFile2Url:!1,parseMultMsg:!0}),s=w(),n=async()=>{const m=localStorage.getItem("auth");if(!m){console.error("No stored credential found");return}return await new le(m).GetOB11Config()},a=async m=>{const u=localStorage.getItem("auth");return u?await new le(u).SetOB11Config(m):(console.error("No stored credential found"),!1)},p=async()=>{try{const m=await n();m&&(o.value.musicSignUrl=m.musicSignUrl,o.value.enableLocalFile2Url=m.enableLocalFile2Url,o.value.parseMultMsg=m.parseMultMsg)}catch(m){console.error("Error loading config:",m)}},d=async()=>{var m,u;try{const c=await n();c&&(c.musicSignUrl=o.value.musicSignUrl||"",c.enableLocalFile2Url=(m=o.value.enableLocalFile2Url)!=null?m:!1,c.parseMultMsg=(u=o.value.parseMultMsg)!=null?u:!0,await a(c)?W.success("配置保存成功"):W.error("配置保存失败"))}catch(c){console.error("Error saving config:",c),W.error("配置保存失败")}};return oe(()=>{p();const m=window.matchMedia("(max-width: 768px)"),u=l=>{l.matches?s.value="top":s.value="left"};m.addEventListener("change",u);const c=new Event("change");return Object.defineProperty(c,"matches",{value:m.matches,writable:!1}),m.dispatchEvent(c),()=>{m.removeEventListener("change",u)}}),(m,u)=>{const c=r("t-divider"),l=r("t-input"),Q=r("t-form-item"),S=r("t-switch"),i=r("t-form"),b=r("t-button"),$=r("t-card");return C(),M(te,null,[g("div",Yn,[e(c,{content:"其余配置",align:"left"},{content:t(()=>[g("div",Zn,[e(V(Ct)),u[3]||(u[3]=g("div",{style:{"margin-left":"5px"}},"其余配置",-1))])]),_:1})]),e($,{class:"card"},{default:t(()=>[g("div",ea,[g("div",ta,[e(i,{ref:"form",model:o.value,"label-align":s.value,"label-width":"auto",colon:""},{default:t(()=>[e(Q,{label:"音乐签名地址",name:"musicSignUrl",class:"form-item"},{default:t(()=>[e(l,{modelValue:o.value.musicSignUrl,"onUpdate:modelValue":u[0]||(u[0]=_=>o.value.musicSignUrl=_)},null,8,["modelValue"])]),_:1}),e(Q,{label:"启用本地文件到URL",name:"enableLocalFile2Url",class:"form-item"},{default:t(()=>[e(S,{modelValue:o.value.enableLocalFile2Url,"onUpdate:modelValue":u[1]||(u[1]=_=>o.value.enableLocalFile2Url=_)},null,8,["modelValue"])]),_:1}),e(Q,{label:"启用上报解析合并消息",name:"parseMultMsg",class:"form-item"},{default:t(()=>[e(S,{modelValue:o.value.parseMultMsg,"onUpdate:modelValue":u[2]||(u[2]=_=>o.value.parseMultMsg=_)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","label-align"]),g("div",oa,[e(b,{onClick:d},{default:t(()=>u[4]||(u[4]=[U("保存")])),_:1})])])])]),_:1})],64)}}}),aa=Z(na,[["__scopeId","data-v-e4afc51d"]]),sa=[{path:"/",redirect:"/webui"},{path:"/webui",component:Xn,name:"WebUiLogin"},{path:"/qqlogin",component:Hn,name:"QQLogin"},{path:"/dashboard",component:Fo,children:[{path:"",redirect:"basic-info"},{path:"basic-info",component:Ro,name:"BasicInfo"},{path:"network-config",component:Wn,name:"NetWork"},{path:"log-view",component:_n,name:"LogView"},{path:"other-config",component:aa,name:"OtherConfig"},{path:"about-us",component:rn,name:"AboutUs"}]}],la=Lt({history:St(),routes:sa}),L=Xe(ko);L.use(la);L.use(Tt);L.use(Ut);L.use(Mt);L.use(Pt);L.use(xt);L.use($t);L.use(It);L.use(Ft);L.use(Nt);L.use(Et);L.use(Ot);L.use(Rt);L.use(At);L.use(Bt);L.use(Wt);L.use(jt);L.use(qt);L.use(zt);L.use(Dt);L.use(Gt);L.use(Ht);L.use(Jt);L.use(Kt);L.use(Xt);L.use(Yt);L.use(Zt);L.use(eo);L.use(to);L.use(oo);L.use(no);L.use(ao);L.use(so);L.use(lo);L.use(ro);L.use(io);L.use(uo);L.use(co);L.use(po);L.use(mo);L.use(fo);L.use(go);L.use(vo);L.use(_o);L.use(ho);L.mount("#app");export{ia as __vite_legacy_guard};
